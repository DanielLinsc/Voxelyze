<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Voxelyze: C:/Code/VoxCad/Voxelyze/include/VX_Voxel.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Voxelyze
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">C:/Code/VoxCad/Voxelyze/include/VX_Voxel.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*******************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">Copyright (c) 2010, Jonathan Hiller (Cornell University)</span>
<a name="l00003"></a>00003 <span class="comment">If used in publication cite &quot;J. Hiller and H. Lipson &quot;Dynamic Simulation of Soft Heterogeneous Objects&quot; In press. (2011)&quot;</span>
<a name="l00004"></a>00004 <span class="comment"></span>
<a name="l00005"></a>00005 <span class="comment">This file is part of Voxelyze.</span>
<a name="l00006"></a>00006 <span class="comment">Voxelyze is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</span>
<a name="l00007"></a>00007 <span class="comment">Voxelyze is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Lesser General Public License for more details.</span>
<a name="l00008"></a>00008 <span class="comment">See &lt;http://www.opensource.org/licenses/lgpl-3.0.html&gt; for license details.</span>
<a name="l00009"></a>00009 <span class="comment">*******************************************************************************/</span>
<a name="l00010"></a>00010 
<a name="l00011"></a>00011 <span class="preprocessor">#ifndef VX_VOXEL_H</span>
<a name="l00012"></a>00012 <span class="preprocessor"></span><span class="preprocessor">#define VX_VOXEL_H</span>
<a name="l00013"></a>00013 <span class="preprocessor"></span>
<a name="l00014"></a>00014 <span class="comment">//class CVX_Link;</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &quot;Vec3D.h&quot;</span>
<a name="l00016"></a>00016 <span class="preprocessor">#include &quot;VX_Link.h&quot;</span>
<a name="l00017"></a>00017 <span class="preprocessor">#include &quot;VX_External.h&quot;</span>
<a name="l00018"></a>00018 <span class="comment">//#include &quot;VX_Enums.h&quot;</span>
<a name="l00019"></a>00019 <span class="preprocessor">#include &quot;VX_MaterialVoxel.h&quot;</span> <span class="comment">//needed for inline of some &quot;get&quot; functions</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &quot;VX_Collision.h&quot;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &lt;list&gt;</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 
<a name="l00026"></a>00026 
<a name="l00037"></a><a class="code" href="class_c_v_x___voxel.html">00037</a> <span class="keyword">class </span><a class="code" href="class_c_v_x___voxel.html" title="Defines a specific instance of a voxel and holds its current state.">CVX_Voxel</a>
<a name="l00038"></a>00038 {
<a name="l00039"></a>00039 <span class="keyword">public</span>:
<a name="l00041"></a><a class="code" href="class_c_v_x___voxel.html#a1c07f828986ee360852baef8fa1ea7a0">00041</a>         <span class="keyword">enum</span> <a class="code" href="class_c_v_x___voxel.html#a1c07f828986ee360852baef8fa1ea7a0" title="Defines the direction of a link relative to a given voxel.">linkDirection</a> {    
<a name="l00042"></a><a class="code" href="class_c_v_x___voxel.html#a1c07f828986ee360852baef8fa1ea7a0a7af755292b105f81b0801886c8bb3d4f">00042</a>                 <a class="code" href="class_c_v_x___voxel.html#a1c07f828986ee360852baef8fa1ea7a0a7af755292b105f81b0801886c8bb3d4f" title="Positive X direction.">X_POS</a>=0,                        
<a name="l00043"></a><a class="code" href="class_c_v_x___voxel.html#a1c07f828986ee360852baef8fa1ea7a0addd23bb30f0806dc7f81ad3b1c8a9cad">00043</a>                 <a class="code" href="class_c_v_x___voxel.html#a1c07f828986ee360852baef8fa1ea7a0addd23bb30f0806dc7f81ad3b1c8a9cad" title="Negative X direction.">X_NEG</a>=1,                        
<a name="l00044"></a><a class="code" href="class_c_v_x___voxel.html#a1c07f828986ee360852baef8fa1ea7a0a6592192564d60a3e4ab2e5c7c480756d">00044</a>                 <a class="code" href="class_c_v_x___voxel.html#a1c07f828986ee360852baef8fa1ea7a0a6592192564d60a3e4ab2e5c7c480756d" title="Positive Y direction.">Y_POS</a>=2,                        
<a name="l00045"></a><a class="code" href="class_c_v_x___voxel.html#a1c07f828986ee360852baef8fa1ea7a0a3d0987bf2c426f355bd9d92dd9340c38">00045</a>                 <a class="code" href="class_c_v_x___voxel.html#a1c07f828986ee360852baef8fa1ea7a0a3d0987bf2c426f355bd9d92dd9340c38" title="Negative Y direction.">Y_NEG</a>=3,                        
<a name="l00046"></a><a class="code" href="class_c_v_x___voxel.html#a1c07f828986ee360852baef8fa1ea7a0adfc3eed5d03042bea708bd35060481a6">00046</a>                 <a class="code" href="class_c_v_x___voxel.html#a1c07f828986ee360852baef8fa1ea7a0adfc3eed5d03042bea708bd35060481a6" title="Positive Z direction.">Z_POS</a>=4,                        
<a name="l00047"></a><a class="code" href="class_c_v_x___voxel.html#a1c07f828986ee360852baef8fa1ea7a0a801e6ac1ad59c1ff9f44a8a870a7ee7f">00047</a>                 <a class="code" href="class_c_v_x___voxel.html#a1c07f828986ee360852baef8fa1ea7a0a801e6ac1ad59c1ff9f44a8a870a7ee7f" title="Negative Z direction.">Z_NEG</a>=5                         
<a name="l00048"></a>00048         }; 
<a name="l00050"></a><a class="code" href="class_c_v_x___voxel.html#a1b67fddebd41c8894aa961e0f4fe50ef">00050</a>         <span class="keyword">enum</span> <a class="code" href="class_c_v_x___voxel.html#a1b67fddebd41c8894aa961e0f4fe50ef" title="Defines each of 8 corners of a voxel.">voxelCorner</a> {
<a name="l00051"></a>00051                 NNN = 0, <span class="comment">//0b000</span>
<a name="l00052"></a>00052                 NNP = 1, <span class="comment">//0b001</span>
<a name="l00053"></a>00053                 NPN = 2, <span class="comment">//0b010</span>
<a name="l00054"></a>00054                 NPP = 3, <span class="comment">//0b011</span>
<a name="l00055"></a>00055                 PNN = 4, <span class="comment">//0b100</span>
<a name="l00056"></a>00056                 PNP = 5, <span class="comment">//0b101</span>
<a name="l00057"></a>00057                 PPN = 6, <span class="comment">//0b110</span>
<a name="l00058"></a>00058                 PPP = 7  <span class="comment">//0b111</span>
<a name="l00059"></a>00059         }; 
<a name="l00060"></a>00060 
<a name="l00061"></a>00061         <a class="code" href="class_c_v_x___voxel.html#a5b7889892ca034feee0d010a1a2201d1" title="Default constuctor.">CVX_Voxel</a>(<a class="code" href="class_c_v_x___material_voxel.html" title="Defines a voxel type of a specific material.">CVX_MaterialVoxel</a>* <a class="code" href="class_c_v_x___voxel.html#ab085b4add56cd4108e27efec4b12ac51" title="Returns the linked material object containing the physical properties of this voxel.">material</a>, <span class="keywordtype">short</span> <a class="code" href="class_c_v_x___voxel.html#acfaa79ddefa95dc4dc33284916c24156" title="Returns the global X index of this voxel.">indexX</a>, <span class="keywordtype">short</span> <a class="code" href="class_c_v_x___voxel.html#aa4ccb8dc8c0a1a617df720887a13bc36" title="Returns the global Y index of this voxel.">indexY</a>, <span class="keywordtype">short</span> <a class="code" href="class_c_v_x___voxel.html#a8859ca0b16c1d638f12c1b5e60905a19" title="Returns the global Z index of this voxel.">indexZ</a>); 
<a name="l00062"></a>00062         <a class="code" href="class_c_v_x___voxel.html#a37bf611a308d692b9b2a3dfbd16189d5" title="Destructor.">~CVX_Voxel</a>(); 
<a name="l00063"></a>00063         <span class="keywordtype">void</span> <a class="code" href="class_c_v_x___voxel.html#ac290f488df45eeaf207ddfc95ed3e48d" title="Resets this voxels to its original position, orientation, temperature, etc. and zeros its momentum...">reset</a>(); 
<a name="l00064"></a>00064 
<a name="l00065"></a><a class="code" href="class_c_v_x___voxel.html#a97af28d3c3bd2c0c31f4c040bdeeee26">00065</a>         <a class="code" href="class_c_v_x___link.html" title="Defines a solid link between two adjacent voxels and holds its current state.">CVX_Link</a>* <a class="code" href="class_c_v_x___voxel.html#a97af28d3c3bd2c0c31f4c040bdeeee26" title="Returns a pointer to the link object in the specified direction if it exists. Returns null if a link ...">link</a>(<a class="code" href="class_c_v_x___voxel.html#a1c07f828986ee360852baef8fa1ea7a0" title="Defines the direction of a link relative to a given voxel.">linkDirection</a> direction)<span class="keyword"> const </span>{<span class="keywordflow">return</span> links[direction];} 
<a name="l00066"></a><a class="code" href="class_c_v_x___voxel.html#abe1eb3347b846201784fd4ed1f0761ed">00066</a>         <span class="keywordtype">int</span> <a class="code" href="class_c_v_x___voxel.html#abe1eb3347b846201784fd4ed1f0761ed" title="Returns the number of links present for this voxel out of a total 6 possible.">linkCount</a>()<span class="keyword"> const </span>{<span class="keywordtype">int</span> retVal =0; <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;6; i++) <span class="keywordflow">if</span> (links[i]) retVal++; <span class="keywordflow">return</span> retVal;} 
<a name="l00067"></a>00067         <a class="code" href="class_c_v_x___voxel.html" title="Defines a specific instance of a voxel and holds its current state.">CVX_Voxel</a>* <a class="code" href="class_c_v_x___voxel.html#a84abdbb231002e9e8658d10d91ac9d3d" title="Returns a pointer to the voxel in the specified direction if one exists, or NULL otherwise.">adjacentVoxel</a>(<a class="code" href="class_c_v_x___voxel.html#a1c07f828986ee360852baef8fa1ea7a0" title="Defines the direction of a link relative to a given voxel.">linkDirection</a> direction) <span class="keyword">const</span>; 
<a name="l00068"></a><a class="code" href="class_c_v_x___voxel.html#acfaa79ddefa95dc4dc33284916c24156">00068</a>         <span class="keywordtype">short</span> <a class="code" href="class_c_v_x___voxel.html#acfaa79ddefa95dc4dc33284916c24156" title="Returns the global X index of this voxel.">indexX</a>() {<span class="keywordflow">return</span> ix;} 
<a name="l00069"></a><a class="code" href="class_c_v_x___voxel.html#aa4ccb8dc8c0a1a617df720887a13bc36">00069</a>         <span class="keywordtype">short</span> <a class="code" href="class_c_v_x___voxel.html#aa4ccb8dc8c0a1a617df720887a13bc36" title="Returns the global Y index of this voxel.">indexY</a>() {<span class="keywordflow">return</span> iy;} 
<a name="l00070"></a><a class="code" href="class_c_v_x___voxel.html#a8859ca0b16c1d638f12c1b5e60905a19">00070</a>         <span class="keywordtype">short</span> <a class="code" href="class_c_v_x___voxel.html#a8859ca0b16c1d638f12c1b5e60905a19" title="Returns the global Z index of this voxel.">indexZ</a>() {<span class="keywordflow">return</span> iz;} 
<a name="l00071"></a>00071 
<a name="l00072"></a><a class="code" href="class_c_v_x___voxel.html#ab085b4add56cd4108e27efec4b12ac51">00072</a>         <a class="code" href="class_c_v_x___material_voxel.html" title="Defines a voxel type of a specific material.">CVX_MaterialVoxel</a>* <a class="code" href="class_c_v_x___voxel.html#ab085b4add56cd4108e27efec4b12ac51" title="Returns the linked material object containing the physical properties of this voxel.">material</a>() {<span class="keywordflow">return</span> mat;} 
<a name="l00073"></a>00073         
<a name="l00074"></a><a class="code" href="class_c_v_x___voxel.html#a6e29c2f312db26414bac4fc5a40b6e36">00074</a>         <span class="keywordtype">bool</span> <a class="code" href="class_c_v_x___voxel.html#a6e29c2f312db26414bac4fc5a40b6e36" title="Returns true if this voxel has had its CVX_External object created. This does not mecessarily imply t...">externalExists</a>() {<span class="keywordflow">return</span> ext?<span class="keyword">true</span>:<span class="keyword">false</span>;} 
<a name="l00075"></a><a class="code" href="class_c_v_x___voxel.html#a9a77fad4345f9fc62152ab89ea5ff1cd">00075</a>         <a class="code" href="class_c_v_x___external.html" title="Container for all external influences on a voxel such as forces and prescribed displacements.">CVX_External</a>* <a class="code" href="class_c_v_x___voxel.html#a9a77fad4345f9fc62152ab89ea5ff1cd" title="Returns a pointer to this voxel&#39;s unique external object that contains fixes, forces, and/or displacements. Allocates a new empty one if it doesn&#39;t already exist. Use externalExists() to determine if external() has been previously called at any time.">external</a>() {<span class="keywordflow">if</span> (!ext) ext = <span class="keyword">new</span> <a class="code" href="class_c_v_x___external.html" title="Container for all external influences on a voxel such as forces and prescribed displacements.">CVX_External</a>(); <span class="keywordflow">return</span> ext;} 
<a name="l00076"></a>00076 
<a name="l00077"></a>00077 
<a name="l00078"></a>00078         <span class="keywordtype">void</span> <a class="code" href="class_c_v_x___voxel.html#ae508da81d56c672fb829b05af2a79460" title="Advances this voxel&#39;s state according to all forces and moments acting on it. Large timesteps will ca...">timeStep</a>(<span class="keywordtype">float</span> dt); 
<a name="l00079"></a>00079 
<a name="l00080"></a>00080         <span class="comment">//physical location</span>
<a name="l00081"></a><a class="code" href="class_c_v_x___voxel.html#af923a3cd7d0dd0af5bce370a24944bee">00081</a>         <a class="code" href="class_vec3_d.html">Vec3D&lt;double&gt;</a> <a class="code" href="class_c_v_x___voxel.html#af923a3cd7d0dd0af5bce370a24944bee" title="Returns the center position of this voxel in meters (GCS). This is the origin of the local coordinate...">position</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> pos;} 
<a name="l00082"></a><a class="code" href="class_c_v_x___voxel.html#a19c5f2f49ef7df7d8922037e3a60c4fb">00082</a>         <a class="code" href="class_vec3_d.html">Vec3D&lt;double&gt;</a> <a class="code" href="class_c_v_x___voxel.html#a19c5f2f49ef7df7d8922037e3a60c4fb" title="Returns the initial (nominal) position of this voxel.">originalPosition</a>()<span class="keyword"> const </span>{<span class="keywordtype">double</span> s=mat-&gt;<a class="code" href="class_c_v_x___material_voxel.html#ac9ab06f0736fd4e5c18114a7cee76478" title="Returns the nominal cubic voxel size in meters.">nominalSize</a>(); <span class="keywordflow">return</span> <a class="code" href="class_vec3_d.html">Vec3D&lt;double&gt;</a>(ix*s, iy*s, iz*s);} 
<a name="l00083"></a><a class="code" href="class_c_v_x___voxel.html#a528c5a29671c9584a54aa4718f1a2878">00083</a>         <a class="code" href="class_vec3_d.html">Vec3D&lt;double&gt;</a> <a class="code" href="class_c_v_x___voxel.html#a528c5a29671c9584a54aa4718f1a2878" title="Returns the 3D displacement of this voxel from its original location in meters (GCS)/.">displacement</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> (pos - <a class="code" href="class_c_v_x___voxel.html#a19c5f2f49ef7df7d8922037e3a60c4fb" title="Returns the initial (nominal) position of this voxel.">originalPosition</a>());} 
<a name="l00084"></a><a class="code" href="class_c_v_x___voxel.html#a6e473c2d50357f851fb6ca665586d514">00084</a>         <a class="code" href="class_vec3_d.html">Vec3D&lt;float&gt;</a> <a class="code" href="class_c_v_x___voxel.html#a6e473c2d50357f851fb6ca665586d514" title="Returns the current deformed size of this voxel in the local voxel coordinates system (LCS)...">size</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="class_c_v_x___voxel.html#a21dbadd4247984ab46cc6f496f67cc82" title="Returns the deformed location of the voxel corner in the specified corner in the local voxel coordina...">cornerOffset</a>(PPP)-<a class="code" href="class_c_v_x___voxel.html#a21dbadd4247984ab46cc6f496f67cc82" title="Returns the deformed location of the voxel corner in the specified corner in the local voxel coordina...">cornerOffset</a>(NNN);} 
<a name="l00085"></a>00085         <a class="code" href="class_vec3_d.html">Vec3D&lt;float&gt;</a> <a class="code" href="class_c_v_x___voxel.html#a334359ecc1f4a50018707f9a14f632a1" title="Returns the deformed location of the voxel corner in the specified corner in the global coordinate sy...">cornerPosition</a>(<a class="code" href="class_c_v_x___voxel.html#a1b67fddebd41c8894aa961e0f4fe50ef" title="Defines each of 8 corners of a voxel.">voxelCorner</a> corner) <span class="keyword">const</span>; 
<a name="l00086"></a>00086         <a class="code" href="class_vec3_d.html">Vec3D&lt;float&gt;</a> <a class="code" href="class_c_v_x___voxel.html#a21dbadd4247984ab46cc6f496f67cc82" title="Returns the deformed location of the voxel corner in the specified corner in the local voxel coordina...">cornerOffset</a>(<a class="code" href="class_c_v_x___voxel.html#a1b67fddebd41c8894aa961e0f4fe50ef" title="Defines each of 8 corners of a voxel.">voxelCorner</a> corner) <span class="keyword">const</span>; 
<a name="l00087"></a><a class="code" href="class_c_v_x___voxel.html#a75abf104fdeb92636bc5e11859d062b7">00087</a>         <span class="keywordtype">bool</span> <a class="code" href="class_c_v_x___voxel.html#a75abf104fdeb92636bc5e11859d062b7" title="Returns true if the voxel is surrounded by other voxels on its 6 coordinate faces. Returns false if 1 or more faces are exposed.">isInterior</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> (boolStates &amp; SURFACE)?<span class="keyword">true</span>:<span class="keyword">false</span>;} 
<a name="l00088"></a><a class="code" href="class_c_v_x___voxel.html#aff7e7dfc6326f36975559c451bca290b">00088</a>         <span class="keywordtype">bool</span> <a class="code" href="class_c_v_x___voxel.html#aff7e7dfc6326f36975559c451bca290b" title="Convenience function to enhance code readibility. The inverse of isInterior(). Returns true 1 or more...">isSurface</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> !<a class="code" href="class_c_v_x___voxel.html#a75abf104fdeb92636bc5e11859d062b7" title="Returns true if the voxel is surrounded by other voxels on its 6 coordinate faces. Returns false if 1 or more faces are exposed.">isInterior</a>();} 
<a name="l00089"></a>00089 
<a name="l00090"></a><a class="code" href="class_c_v_x___voxel.html#abca78029c5d7864a8ab19656f0bf13cb">00090</a>         <a class="code" href="class_vec3_d.html">Vec3D&lt;double&gt;</a> <a class="code" href="class_c_v_x___voxel.html#abca78029c5d7864a8ab19656f0bf13cb" title="Returns the nominal size of this voxel (LCS) accounting for any specified temperature and external ac...">baseSize</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> mat-&gt;<a class="code" href="class_c_v_x___material_voxel.html#a3488c4e3d2234beaa0caad5fbfc79b73" title="Returns the current nominal size (in meters) of any voxels of this material-including external scalin...">size</a>()*(1+temp*mat-&gt;<a class="code" href="class_c_v_x___material.html#a2ffad80e8dadb7215de88be18328e337" title="Coefficient of thermal expansion (CTE)">alphaCTE</a>);} 
<a name="l00091"></a><a class="code" href="class_c_v_x___voxel.html#a9c93a7da3412d376ba43e41d239fc310">00091</a>         <span class="keywordtype">double</span> <a class="code" href="class_c_v_x___voxel.html#a9c93a7da3412d376ba43e41d239fc310" title="Returns the nominal size of this voxel in the specified axis accounting for any specified temperature...">baseSize</a>(<a class="code" href="class_c_v_x___link.html#ae576d8198601b25ae41ea558c8333d91" title="Defines an axis (X, Y, or Z)">CVX_Link::linkAxis</a> axis)<span class="keyword"> const </span>{<span class="keywordflow">return</span> mat-&gt;<a class="code" href="class_c_v_x___material_voxel.html#a3488c4e3d2234beaa0caad5fbfc79b73" title="Returns the current nominal size (in meters) of any voxels of this material-including external scalin...">size</a>()[axis]*(1+temp*mat-&gt;<a class="code" href="class_c_v_x___material.html#a2ffad80e8dadb7215de88be18328e337" title="Coefficient of thermal expansion (CTE)">alphaCTE</a>);} 
<a name="l00092"></a><a class="code" href="class_c_v_x___voxel.html#a0295e88571225c00e236294014923241">00092</a>         <span class="keywordtype">double</span> <a class="code" href="class_c_v_x___voxel.html#a0295e88571225c00e236294014923241" title="Returns the average nominal size of the voxel in a zero-stress (no force) state. (X+Y+Z/3)">baseSizeAverage</a>()<span class="keyword"> const </span>{<a class="code" href="class_vec3_d.html">Vec3D&lt;double&gt;</a> bSize=<a class="code" href="class_c_v_x___voxel.html#abca78029c5d7864a8ab19656f0bf13cb" title="Returns the nominal size of this voxel (LCS) accounting for any specified temperature and external ac...">baseSize</a>(); <span class="keywordflow">return</span> (bSize.<a class="code" href="class_vec3_d.html#a9abc0143f3972f8bc3488e8567e8ff1c" title="The current X value.">x</a>+bSize.<a class="code" href="class_vec3_d.html#a7877b6d0fbb7921f35f6c70651203b73" title="The current Y value.">y</a>+bSize.<a class="code" href="class_vec3_d.html#a7caeb03f34106f563ea42f9760dddcca" title="The current Z value.">z</a>)/3.0f;} 
<a name="l00093"></a>00093 
<a name="l00094"></a><a class="code" href="class_c_v_x___voxel.html#ab08f45e7c82eedb782fa87a6f0778352">00094</a>         <a class="code" href="class_quat3_d.html">Quat3D&lt;double&gt;</a> <a class="code" href="class_c_v_x___voxel.html#ab08f45e7c82eedb782fa87a6f0778352" title="Returns the orientation of this voxel in quaternion form (GCS). This orientation defines the relative...">orientation</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> orient;} 
<a name="l00095"></a><a class="code" href="class_c_v_x___voxel.html#a4db11a574683abb27faf863b5cbac345">00095</a>         <span class="keywordtype">float</span> <a class="code" href="class_c_v_x___voxel.html#a4db11a574683abb27faf863b5cbac345" title="Use with orientationAxis() to get the orientation of this voxel in angle/axis form. Returns the angle in radians.">orientationAngle</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> (<span class="keywordtype">float</span>)orient.<a class="code" href="class_quat3_d.html#a26caf1fc1d7fe9f747982640997c0eec" title="Returns the angular rotation of this quaternion in radians.">Angle</a>();} 
<a name="l00096"></a><a class="code" href="class_c_v_x___voxel.html#ab7370a10484f7cb9bd42842e750c25d8">00096</a>         <a class="code" href="class_vec3_d.html">Vec3D&lt;double&gt;</a> <a class="code" href="class_c_v_x___voxel.html#ab7370a10484f7cb9bd42842e750c25d8" title="Use with orientationAngle() to get the orientation of this voxel in angle/axis form. Returns a unit vector in the global coordinate system (GCS).">orientationAxis</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> orient.<a class="code" href="class_quat3_d.html#a7b8ece248e655fe20aa16c0cddde9c33" title="Returns the normalized axis of rotation of this quaternion.">Axis</a>();} 
<a name="l00097"></a>00097 
<a name="l00098"></a><a class="code" href="class_c_v_x___voxel.html#a07c7ef14975bf8387926c8da7ada016f">00098</a>         <span class="keywordtype">float</span> <a class="code" href="class_c_v_x___voxel.html#a07c7ef14975bf8387926c8da7ada016f" title="Returns the distance (magnitude of displacement) this voxel has moved from its initial nominal positi...">displacementMagnitude</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> (<span class="keywordtype">float</span>)<a class="code" href="class_c_v_x___voxel.html#a528c5a29671c9584a54aa4718f1a2878" title="Returns the 3D displacement of this voxel from its original location in meters (GCS)/.">displacement</a>().<a class="code" href="class_vec3_d.html#a57bfc5416a7879da6684b89696ad3f83" title="Returns the length (magnitude) of this vector. This vector is not modified.">Length</a>();} 
<a name="l00099"></a><a class="code" href="class_c_v_x___voxel.html#abbfc78979023390f41c15033a8ca1ca9">00099</a>         <span class="keywordtype">float</span> <a class="code" href="class_c_v_x___voxel.html#abbfc78979023390f41c15033a8ca1ca9" title="Returns the angle (magnitude of angular displacement) this voxel has rotated from its initial nominal...">angularDisplacementMagnitude</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> (<span class="keywordtype">float</span>)orient.<a class="code" href="class_quat3_d.html#a26caf1fc1d7fe9f747982640997c0eec" title="Returns the angular rotation of this quaternion in radians.">Angle</a>();} 
<a name="l00100"></a><a class="code" href="class_c_v_x___voxel.html#a9fbbc5958f0afc0d51e4c3db46535474">00100</a>         <a class="code" href="class_vec3_d.html">Vec3D&lt;double&gt;</a> <a class="code" href="class_c_v_x___voxel.html#a9fbbc5958f0afc0d51e4c3db46535474" title="Returns the 3D velocity of this voxel in m/s (GCS)">velocity</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> linMom*mat-&gt;<a class="code" href="class_c_v_x___material_voxel.html#abf4b2498e46c035e45a9953045ba2b06" title="Cached 1/Mass (1/kg)">_massInverse</a>;} 
<a name="l00101"></a><a class="code" href="class_c_v_x___voxel.html#afb30a6af40d7831fa0527f74fb394050">00101</a>         <span class="keywordtype">float</span> <a class="code" href="class_c_v_x___voxel.html#afb30a6af40d7831fa0527f74fb394050" title="Returns the velocity of this voxel in m/s.">velocityMagnitude</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> (<span class="keywordtype">float</span>)(linMom.<a class="code" href="class_vec3_d.html#a57bfc5416a7879da6684b89696ad3f83" title="Returns the length (magnitude) of this vector. This vector is not modified.">Length</a>()*mat-&gt;<a class="code" href="class_c_v_x___material_voxel.html#abf4b2498e46c035e45a9953045ba2b06" title="Cached 1/Mass (1/kg)">_massInverse</a>);} 
<a name="l00102"></a><a class="code" href="class_c_v_x___voxel.html#a02e64d68d0977a946deb83f5fbdbfb1b">00102</a>         <a class="code" href="class_vec3_d.html">Vec3D&lt;double&gt;</a> <a class="code" href="class_c_v_x___voxel.html#a02e64d68d0977a946deb83f5fbdbfb1b" title="Returns the 3D angular velocity of this voxel in rad/s (GCS)">angularVelocity</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> angMom*mat-&gt;<a class="code" href="class_c_v_x___material_voxel.html#a7f548c797fe09a677f72fc056200f888" title="Cached 1/Inertia (1/(kg*m^2))">_momentInertiaInverse</a>;} 
<a name="l00103"></a><a class="code" href="class_c_v_x___voxel.html#a4d25a8c0040dd82853f0e83a177dddbc">00103</a>         <span class="keywordtype">float</span> <a class="code" href="class_c_v_x___voxel.html#a4d25a8c0040dd82853f0e83a177dddbc" title="Returns the angular velocity of this voxel in rad/s.">angularVelocityMagnitude</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> (<span class="keywordtype">float</span>)(angMom.<a class="code" href="class_vec3_d.html#a57bfc5416a7879da6684b89696ad3f83" title="Returns the length (magnitude) of this vector. This vector is not modified.">Length</a>()*mat-&gt;<a class="code" href="class_c_v_x___material_voxel.html#a7f548c797fe09a677f72fc056200f888" title="Cached 1/Inertia (1/(kg*m^2))">_momentInertiaInverse</a>);} 
<a name="l00104"></a><a class="code" href="class_c_v_x___voxel.html#a5542d2544e18a30293338f3923fe59b8">00104</a>         <span class="keywordtype">float</span> <a class="code" href="class_c_v_x___voxel.html#a5542d2544e18a30293338f3923fe59b8" title="Returms the kinetic energy of this voxel in Joules.">kineticEnergy</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> (<span class="keywordtype">float</span>)(0.5*(mat-&gt;<a class="code" href="class_c_v_x___material_voxel.html#abf4b2498e46c035e45a9953045ba2b06" title="Cached 1/Mass (1/kg)">_massInverse</a>*linMom.<a class="code" href="class_vec3_d.html#a6677c52eb03b670cd9dc64d7be41f3e2" title="Returns the length (magnitude) squared of this vector. This vector is not modified.">Length2</a>() + mat-&gt;<a class="code" href="class_c_v_x___material_voxel.html#a7f548c797fe09a677f72fc056200f888" title="Cached 1/Inertia (1/(kg*m^2))">_momentInertiaInverse</a>*angMom.<a class="code" href="class_vec3_d.html#a6677c52eb03b670cd9dc64d7be41f3e2" title="Returns the length (magnitude) squared of this vector. This vector is not modified.">Length2</a>()));} 
<a name="l00105"></a><a class="code" href="class_c_v_x___voxel.html#aeee2956ffb1194c63b8d636c626b0502">00105</a>         <span class="keywordtype">float</span> <a class="code" href="class_c_v_x___voxel.html#aeee2956ffb1194c63b8d636c626b0502" title="Returns the volumetric strain of the voxel according to the definition at http://www.colorado.edu/engineering/CAS/courses.d/Structures.d/IAST.Lect05.d/IAST.Lect05.pdf.">volumetricStrain</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> (<span class="keywordtype">float</span>)(strain(<span class="keyword">false</span>).<a class="code" href="class_vec3_d.html#a9abc0143f3972f8bc3488e8567e8ff1c" title="The current X value.">x</a>+strain(<span class="keyword">false</span>).<a class="code" href="class_vec3_d.html#a7877b6d0fbb7921f35f6c70651203b73" title="The current Y value.">y</a>+strain(<span class="keyword">false</span>).<a class="code" href="class_vec3_d.html#a7caeb03f34106f563ea42f9760dddcca" title="The current Z value.">z</a>);} 
<a name="l00106"></a><a class="code" href="class_c_v_x___voxel.html#ae2f695f60376035ed871226ceafe2f83">00106</a>         <span class="keywordtype">float</span> <a class="code" href="class_c_v_x___voxel.html#ae2f695f60376035ed871226ceafe2f83" title="Returns the engineering internal &quot;pressure&quot; in Pa according to the definition at http://www.colorado.edu/engineering/CAS/courses.d/Structures.d/IAST.Lect05.d/IAST.Lect05.pdf.">pressure</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> -mat-&gt;<a class="code" href="class_c_v_x___material.html#a49417b8d1d3fe8f443e2cec5b142dded" title="Returns Youngs modulus in Pa.">youngsModulus</a>()*<a class="code" href="class_c_v_x___voxel.html#aeee2956ffb1194c63b8d636c626b0502" title="Returns the volumetric strain of the voxel according to the definition at http://www.colorado.edu/engineering/CAS/courses.d/Structures.d/IAST.Lect05.d/IAST.Lect05.pdf.">volumetricStrain</a>()/(3*(1-2*mat-&gt;<a class="code" href="class_c_v_x___material.html#a616b8707d4eae84f2f990ed20b374fa9" title="Returns the current Poissons ratio.">poissonsRatio</a>()));} 
<a name="l00107"></a>00107 
<a name="l00108"></a>00108         <span class="comment">//float voxelInfo(voxelInfoType type) const;</span>
<a name="l00109"></a>00109 
<a name="l00110"></a>00110         <span class="comment">//material state</span>
<a name="l00111"></a>00111         <span class="keywordtype">bool</span> <a class="code" href="class_c_v_x___voxel.html#a030f61fc527f29f89509e26535b2e7bb" title="Returns true if the stress in this voxel has ever exceeded the yield stress. Technically, this returns true if any of the connected links have yielded since the stress state of the voxel is never expressly calculated.">isYielded</a>() <span class="keyword">const</span>; 
<a name="l00112"></a>00112         <span class="keywordtype">bool</span> <a class="code" href="class_c_v_x___voxel.html#a13ee56e1017e01b748817c3a680701e1" title="Returns true if the stress in this voxel has ever exceeded the failure stress. Technically, this returns true if any of the connected links have failed since the stress state of the voxel is never expressly calculated.">isFailed</a>() <span class="keyword">const</span>; 
<a name="l00113"></a>00113 
<a name="l00114"></a>00114         <span class="comment">//@ voxel level for heat diffusion experiments later</span>
<a name="l00115"></a><a class="code" href="class_c_v_x___voxel.html#a5262455c3032e86200691a373c871ca0">00115</a>         <span class="keywordtype">float</span> <a class="code" href="class_c_v_x___voxel.html#a5262455c3032e86200691a373c871ca0" title="Returns the current temperature of this voxel in degrees Celsius.">temperature</a>() {<span class="keywordflow">return</span> temp;} 
<a name="l00116"></a>00116         <span class="keywordtype">void</span> <a class="code" href="class_c_v_x___voxel.html#a586d1925ee6bc35d1de603956d4c2c15" title="Specifies the temperature for this voxel. This adds (or subtracts) the correct amount of thermal ener...">setTemperature</a>(<span class="keywordtype">float</span> <a class="code" href="class_c_v_x___voxel.html#a5262455c3032e86200691a373c871ca0" title="Returns the current temperature of this voxel in degrees Celsius.">temperature</a>); 
<a name="l00117"></a>00117 
<a name="l00118"></a>00118 <span class="comment">//      void addThermalEnergy(float energy); //adds a fixed amount of energy</span>
<a name="l00119"></a>00119 <span class="comment">//      void fixTemperature(float temperature); //fixes temperature at the </span>
<a name="l00120"></a>00120 
<a name="l00121"></a>00121         <a class="code" href="class_vec3_d.html">Vec3D&lt;float&gt;</a> <a class="code" href="class_c_v_x___voxel.html#a2dc4a58f99bebfbe20e705be2b7249b3" title="Returns the current external force applied to this voxel in newtons. If the voxel is not fixed this w...">externalForce</a>(); 
<a name="l00122"></a>00122 <span class="comment">//      void setExternalForce(const float xForce, const float yForce, const float zForce) {extForce = Vec3D&lt;float&gt;(xForce, yForce, zForce);} //!&lt; Applies forces to this voxel in the global coordinate system. Has no effect in any fixed degrees of freedom. @param xForce Force in the X direction in newtons.  @param yForce Force in the Y direction in newtons.  @param zForce Force in the Z direction in newtons. </span>
<a name="l00123"></a>00123 <span class="comment">//      void setExternalForce(const Vec3D&lt;float&gt;&amp; force) {extForce = force;} //!&lt; Convenience function for setExternalForce(float, float, float).</span>
<a name="l00124"></a>00124         <a class="code" href="class_vec3_d.html">Vec3D&lt;float&gt;</a> <a class="code" href="class_c_v_x___voxel.html#aa4e36488fa7356bf9cb5bc978072773f" title="Returns the current external moment applied to this voxel in N-m. If the voxel is not fixed this will...">externalMoment</a>(); 
<a name="l00125"></a>00125 <span class="comment">//      void setExternalMoment(const float xMoment, const float yMoment, const float zMoment) {extMoment = Vec3D&lt;float&gt;(xMoment, yMoment, zMoment);}  //!&lt; Applies moments to this voxel in the global coordinate system. All rotations according to the right-hand rule. Has no effect in any fixed degrees of freedom. @param xMoment Moment in the X axis rotation in newton-meters. @param yMoment Moment in the Y axis rotation in newton-meters. @param zMoment Moment in the Z axis rotation in newton-meters. </span>
<a name="l00126"></a>00126 <span class="comment">//      void setExternalMoment(const Vec3D&lt;float&gt;&amp; moment) {extMoment = moment;} //!&lt; Convenience function for setExternalMoment(float, float, float).</span>
<a name="l00127"></a>00127 
<a name="l00128"></a><a class="code" href="class_c_v_x___voxel.html#af34ab572b7b7ad0fbf921273e51ff818">00128</a>         <span class="keywordtype">void</span> <a class="code" href="class_c_v_x___voxel.html#af34ab572b7b7ad0fbf921273e51ff818" title="Halts all momentum of this block. Unless fixed the voxel will continue to move in subsequent timestep...">haltMotion</a>(){linMom = angMom = <a class="code" href="class_vec3_d.html" title="A generic 3D vector template.">Vec3D&lt;&gt;</a>(0,0,0);} 
<a name="l00129"></a>00129 
<a name="l00130"></a>00130 <span class="comment">//      void setFixed(bool xTranslate, bool yTranslate, bool zTranslate, bool xRotate, bool yRotate, bool zRotate); //!&lt; Set the specified true degrees of freedom as fixed for this voxel. (GCS) @param[in] xTranslate Translation in the X direction  @param[in] yTranslate Translation in the Y direction @param[in] zTranslate Translation in the Z direction @param[in] xRotate Rotation about the X axis @param[in] yRotate Rotation about the Y axis @param[in] zRotate Rotation about the Z axis</span>
<a name="l00131"></a>00131 <span class="comment">//      void setFixed(dofComponent dof, float displacement=0.0f); //!&lt; Sets the specified degree of freedom to fixed and applies the prescribed displacement. @param[in] dof Degree of freedom to fix according to the dofComponent enum. @param[in] displacement The prescribed displacement in meters for translational degrees of freedom and radians for rotational degrees of freedom.</span>
<a name="l00132"></a>00132 <span class="comment">//      void setFixedAll(const Vec3D&lt;&gt;&amp; translation = Vec3D&lt;&gt;(0,0,0), const Vec3D&lt;&gt;&amp; rotation = Vec3D&lt;&gt;(0,0,0)); //!&lt;Fixes all 6 degrees of freedom for this voxel. @param [in] translation Translation in meters to prescribe (GCS). @param[in] rotation Rotation in radians to prescribe. Applied in the order of X, Y, Z rotation in the global coordinate system.</span>
<a name="l00133"></a>00133 <span class="comment">//      void setUnfixed(dofComponent dof) {dofSet(dofFixed, dof, false);} //!&lt; Sets the specified degree of freedom to unfixed @param[in] dof Degree of freedom to fix according to the dofComponent enum.</span>
<a name="l00134"></a>00134 <span class="comment">//      void setUnfixedAll() {dofSetAll(dofFixed, false);} //!&lt; Unfixes all 6 degrees of freedom for this voxel.</span>
<a name="l00135"></a>00135 <span class="comment">//      bool isFixed(dofComponent dof) const {return dofIsSet(dofFixed, dof);}  //!&lt; Returns true if the specified degree of freedom is fixed for this voxel. @param[in] dof Degree of freedom to query according to the dofComponent enum.</span>
<a name="l00136"></a>00136 <span class="comment">//      bool isFixedAll() const {return dofIsAllSet(dofFixed);} //!&lt; Returns true if all 6 degrees of freedom are fixed for this voxel.</span>
<a name="l00137"></a>00137 
<a name="l00138"></a>00138         <span class="comment">//float gravity() const {return gravAccel;}</span>
<a name="l00139"></a>00139         <span class="comment">//void setGravityAccel(float gravityAcceleration) {gravAccel = gravityAcceleration;}</span>
<a name="l00140"></a>00140         <span class="comment">//bool isGravityEnabled() const {gravAccel != 0.0f;}</span>
<a name="l00141"></a><a class="code" href="class_c_v_x___voxel.html#ad831357d16e069eb31818a5670db97e6">00141</a>         <span class="keywordtype">void</span> <a class="code" href="class_c_v_x___voxel.html#ad831357d16e069eb31818a5670db97e6" title="Enables this voxel interacting with the floor at Z=0.">enableFloor</a>(<span class="keywordtype">bool</span> enabled) {enabled ? boolStates |= FLOOR_ENABLED : boolStates &amp;= ~FLOOR_ENABLED;} 
<a name="l00142"></a><a class="code" href="class_c_v_x___voxel.html#aa54a77c13234db8066feb35ae7512266">00142</a>         <span class="keywordtype">bool</span> <a class="code" href="class_c_v_x___voxel.html#aa54a77c13234db8066feb35ae7512266" title="Returns true of this voxel will interact with the floor at Z=0.">isFloorEnabled</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> boolStates &amp; FLOOR_ENABLED ? <span class="keyword">true</span> : <span class="keyword">false</span>;} 
<a name="l00143"></a><a class="code" href="class_c_v_x___voxel.html#abf006efe5d03a3b297a87c131d2e224c">00143</a>         <span class="keywordtype">bool</span> <a class="code" href="class_c_v_x___voxel.html#abf006efe5d03a3b297a87c131d2e224c" title="Returns true if this voxel is in contact with the floor and stationary in the horizontal directions...">isFloorStaticFriction</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> boolStates &amp; FLOOR_STATIC_FRICTION ? <span class="keyword">true</span> : <span class="keyword">false</span>;} 
<a name="l00144"></a><a class="code" href="class_c_v_x___voxel.html#ad48862fb1b7578f4a9d98a76041652d5">00144</a>         <span class="keywordtype">float</span> <a class="code" href="class_c_v_x___voxel.html#ad48862fb1b7578f4a9d98a76041652d5" title="Returns the interference (in meters) between the collision envelope of this voxel and the floor at Z=...">floorPenetration</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> (<span class="keywordtype">float</span>)(<a class="code" href="class_c_v_x___voxel.html#a0295e88571225c00e236294014923241" title="Returns the average nominal size of the voxel in a zero-stress (no force) state. (X+Y+Z/3)">baseSizeAverage</a>()/2 - mat-&gt;<a class="code" href="class_c_v_x___material_voxel.html#ac9ab06f0736fd4e5c18114a7cee76478" title="Returns the nominal cubic voxel size in meters.">nominalSize</a>()/2 - pos.<a class="code" href="class_vec3_d.html#a7caeb03f34106f563ea42f9760dddcca" title="The current Z value.">z</a>);} 
<a name="l00145"></a>00145 
<a name="l00146"></a>00146         <a class="code" href="class_vec3_d.html">Vec3D&lt;double&gt;</a> <a class="code" href="class_c_v_x___voxel.html#add37907fdc2891aeaaa9833bf718bb68" title="Calculates and returns the sum of the current forces on this voxel. This would normally only be calle...">force</a>(); 
<a name="l00147"></a>00147         <a class="code" href="class_vec3_d.html">Vec3D&lt;double&gt;</a> <a class="code" href="class_c_v_x___voxel.html#a696c7efcfe35eddb41e5095472f18ca7" title="Calculates and returns the sum of the current moments on this voxel. This would normally only be call...">moment</a>(); 
<a name="l00148"></a>00148 
<a name="l00149"></a>00149         <span class="comment">//float dynamicStiffness() const;</span>
<a name="l00150"></a>00150 
<a name="l00151"></a>00151 
<a name="l00152"></a>00152         <span class="keywordtype">float</span> <a class="code" href="class_c_v_x___voxel.html#a2cca21d7945335d9f751562b44151b95" title="Returns the transverse area of this voxel with respect to the specified axis. This would normally be ...">transverseArea</a>(<a class="code" href="class_c_v_x___link.html#ae576d8198601b25ae41ea558c8333d91" title="Defines an axis (X, Y, or Z)">CVX_Link::linkAxis</a> axis); 
<a name="l00153"></a>00153         <span class="keywordtype">float</span> <a class="code" href="class_c_v_x___voxel.html#a69ebf70b2801b8b2000013b59182bfa3" title="Returns the sum of the current strain of this voxel in the two mutually perpindicular axes to the spe...">transverseStrainSum</a>(<a class="code" href="class_c_v_x___link.html#ae576d8198601b25ae41ea558c8333d91" title="Defines an axis (X, Y, or Z)">CVX_Link::linkAxis</a> axis); 
<a name="l00154"></a>00154 
<a name="l00155"></a><a class="code" href="class_c_v_x___voxel.html#a78603453dabe5856fd6785c75925b334">00155</a>         <span class="keywordtype">float</span> <a class="code" href="class_c_v_x___voxel.html#a78603453dabe5856fd6785c75925b334" title="Returns the damping multiplier for this voxel. This would normally be called only internally for the ...">dampingMultiplier</a>() {<span class="keywordflow">return</span> 2*mat-&gt;<a class="code" href="class_c_v_x___material_voxel.html#a678a8543feade272bb2b23055102fd5d" title="Cached sqrt(mass). (sqrt(Kg))">_sqrtMass</a>*mat-&gt;<a class="code" href="class_c_v_x___material.html#ad3e27fa22ebbbe7413ddb56f9e4aba7b" title="Internal damping ratio.">zetaInternal</a>/previousDt;} 
<a name="l00156"></a>00156 
<a name="l00157"></a>00157         <span class="comment">//a couple global convenience functions to have wherever the link enums are used</span>
<a name="l00158"></a><a class="code" href="class_c_v_x___voxel.html#ac22d56e440c713f56cba2effd84f402e">00158</a>         <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="class_c_v_x___link.html#ae576d8198601b25ae41ea558c8333d91" title="Defines an axis (X, Y, or Z)">CVX_Link::linkAxis</a> <a class="code" href="class_c_v_x___voxel.html#ac22d56e440c713f56cba2effd84f402e" title="Returns the link axis of the specified link direction.">toAxis</a>(<a class="code" href="class_c_v_x___voxel.html#a1c07f828986ee360852baef8fa1ea7a0" title="Defines the direction of a link relative to a given voxel.">linkDirection</a> direction) {<span class="keywordflow">return</span> (<a class="code" href="class_c_v_x___link.html#ae576d8198601b25ae41ea558c8333d91" title="Defines an axis (X, Y, or Z)">CVX_Link::linkAxis</a>)((int)direction/2);} 
<a name="l00159"></a><a class="code" href="class_c_v_x___voxel.html#aa4bb13f519a69c4f6746b3213e366d7e">00159</a>         <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="class_c_v_x___voxel.html#a1c07f828986ee360852baef8fa1ea7a0" title="Defines the direction of a link relative to a given voxel.">linkDirection</a> <a class="code" href="class_c_v_x___voxel.html#aa4bb13f519a69c4f6746b3213e366d7e" title="Returns the link direction of the specified link axis and sign.">toDirection</a>(<a class="code" href="class_c_v_x___link.html#ae576d8198601b25ae41ea558c8333d91" title="Defines an axis (X, Y, or Z)">CVX_Link::linkAxis</a> axis, <span class="keywordtype">bool</span> positiveDirection) {<span class="keywordflow">return</span> (<a class="code" href="class_c_v_x___voxel.html#a1c07f828986ee360852baef8fa1ea7a0" title="Defines the direction of a link relative to a given voxel.">linkDirection</a>)(2*((int)axis) + positiveDirection?0:1);} 
<a name="l00160"></a><a class="code" href="class_c_v_x___voxel.html#aa2034fffd6dc331be8d7a6a92da219b5">00160</a>         <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="class_c_v_x___voxel.html#aa2034fffd6dc331be8d7a6a92da219b5" title="Returns true if the specified link direction is negative.">isNegative</a>(<a class="code" href="class_c_v_x___voxel.html#a1c07f828986ee360852baef8fa1ea7a0" title="Defines the direction of a link relative to a given voxel.">linkDirection</a> direction) {<span class="keywordflow">return</span> direction%2==1;} 
<a name="l00161"></a><a class="code" href="class_c_v_x___voxel.html#a3fe2acd97d6ec5686b262b66368bf9ff">00161</a>         <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="class_c_v_x___voxel.html#a3fe2acd97d6ec5686b262b66368bf9ff" title="Returns true if the specified link direction is positive.">isPositive</a>(<a class="code" href="class_c_v_x___voxel.html#a1c07f828986ee360852baef8fa1ea7a0" title="Defines the direction of a link relative to a given voxel.">linkDirection</a> direction) {<span class="keywordflow">return</span> direction%2==0;} 
<a name="l00162"></a><a class="code" href="class_c_v_x___voxel.html#ac2c6d692493621301710394b0f4d840e">00162</a>         <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="class_c_v_x___voxel.html#a1c07f828986ee360852baef8fa1ea7a0" title="Defines the direction of a link relative to a given voxel.">linkDirection</a> <a class="code" href="class_c_v_x___voxel.html#ac2c6d692493621301710394b0f4d840e" title="Returns the opposite (negated) link direction of the specified direction.">toOpposite</a>(<a class="code" href="class_c_v_x___voxel.html#a1c07f828986ee360852baef8fa1ea7a0" title="Defines the direction of a link relative to a given voxel.">linkDirection</a> direction) {<span class="keywordflow">return</span> (<a class="code" href="class_c_v_x___voxel.html#a1c07f828986ee360852baef8fa1ea7a0" title="Defines the direction of a link relative to a given voxel.">linkDirection</a>)(direction-direction%2 + (direction+1)%2);} 
<a name="l00163"></a>00163 
<a name="l00164"></a>00164 
<a name="l00165"></a>00165 
<a name="l00166"></a>00166 <span class="keyword">private</span>:
<a name="l00167"></a>00167         <span class="keyword">typedef</span> <span class="keywordtype">int</span> voxState;
<a name="l00168"></a>00168         <span class="keyword">enum</span> voxFlags { <span class="comment">//default of each should be zero for easy clearing</span>
<a name="l00169"></a>00169                 SURFACE = 1&lt;&lt;1, <span class="comment">//on the surface?</span>
<a name="l00170"></a>00170                 FLOOR_ENABLED = 1&lt;&lt;2, <span class="comment">//interact with a floor at z=0?</span>
<a name="l00171"></a>00171                 FLOOR_STATIC_FRICTION = 1&lt;&lt;3, <span class="comment">//is the voxel in a state of static friction with the floor?</span>
<a name="l00172"></a>00172         <span class="comment">//      GRAVITY_ENABLED = 1&lt;&lt;4 //should this voxel respond to gravity?</span>
<a name="l00173"></a>00173                 COLLISIONS_ENABLED = 1&lt;&lt;5
<a name="l00174"></a>00174 <span class="comment">//              COLLISIONS_STALE = 1&lt;&lt;6</span>
<a name="l00175"></a>00175         };
<a name="l00176"></a>00176 
<a name="l00177"></a>00177         <a class="code" href="class_c_v_x___material_voxel.html" title="Defines a voxel type of a specific material.">CVX_MaterialVoxel</a>* mat;
<a name="l00178"></a>00178         <span class="keywordtype">short</span> ix, iy, iz;
<a name="l00179"></a>00179         <a class="code" href="class_c_v_x___external.html" title="Container for all external influences on a voxel such as forces and prescribed displacements.">CVX_External</a>* ext;
<a name="l00180"></a>00180 
<a name="l00181"></a>00181         <span class="keywordtype">void</span> replaceMaterial(<a class="code" href="class_c_v_x___material_voxel.html" title="Defines a voxel type of a specific material.">CVX_MaterialVoxel</a>* newMaterial); 
<a name="l00182"></a>00182 
<a name="l00183"></a>00183         <span class="keywordtype">void</span> addLinkInfo(<a class="code" href="class_c_v_x___voxel.html#a1c07f828986ee360852baef8fa1ea7a0" title="Defines the direction of a link relative to a given voxel.">linkDirection</a> direction, <a class="code" href="class_c_v_x___link.html" title="Defines a solid link between two adjacent voxels and holds its current state.">CVX_Link</a>* <a class="code" href="class_c_v_x___voxel.html#a97af28d3c3bd2c0c31f4c040bdeeee26" title="Returns a pointer to the link object in the specified direction if it exists. Returns null if a link ...">link</a>); <span class="comment">//adds the information about a link connected to this voxel in the specified direction</span>
<a name="l00184"></a>00184         <span class="keywordtype">void</span> removeLinkInfo(<a class="code" href="class_c_v_x___voxel.html#a1c07f828986ee360852baef8fa1ea7a0" title="Defines the direction of a link relative to a given voxel.">linkDirection</a> direction); <span class="comment">//removes the information about a link connected to this voxel in the specified direction</span>
<a name="l00185"></a>00185         <a class="code" href="class_c_v_x___link.html" title="Defines a solid link between two adjacent voxels and holds its current state.">CVX_Link</a>* links[6]; <span class="comment">//links in the 6 cardinal directions according to linkDirection enumeration</span>
<a name="l00186"></a>00186 
<a name="l00187"></a>00187 
<a name="l00188"></a>00188 
<a name="l00189"></a>00189         <span class="comment">//voxel state</span>
<a name="l00190"></a>00190         <a class="code" href="class_vec3_d.html">Vec3D&lt;double&gt;</a> pos;                                      <span class="comment">//current center position (meters) (GCS)</span>
<a name="l00191"></a>00191         <a class="code" href="class_vec3_d.html">Vec3D&lt;double&gt;</a> linMom;                           <span class="comment">//current linear momentum (kg*m/s) (GCS)</span>
<a name="l00192"></a>00192         <a class="code" href="class_quat3_d.html">Quat3D&lt;double&gt;</a> orient;                          <span class="comment">//current orientation (GCS)</span>
<a name="l00193"></a>00193         <a class="code" href="class_vec3_d.html">Vec3D&lt;double&gt;</a> angMom;                           <span class="comment">//current angular momentum (kg*m^2/s) (GCS)</span>
<a name="l00194"></a>00194 
<a name="l00195"></a>00195         voxState boolStates;                            <span class="comment">//single int to store many boolean state values as bit flags according to </span>
<a name="l00196"></a>00196         <span class="keywordtype">void</span> setFloorStaticFriction(<span class="keywordtype">bool</span> active) {active? boolStates |= FLOOR_STATIC_FRICTION : boolStates &amp;= ~FLOOR_STATIC_FRICTION;}
<a name="l00197"></a>00197 
<a name="l00198"></a>00198         <span class="comment">//dofObject dofFixed;</span>
<a name="l00199"></a>00199         
<a name="l00200"></a>00200         <span class="comment">//potential inputs affecting this local voxel</span>
<a name="l00201"></a>00201         <span class="comment">//Vec3D&lt;float&gt; extForce, extMoment; //External force, moment applied to this voxel (N, N-m) if relevant DOF are unfixed</span>
<a name="l00202"></a>00202 
<a name="l00203"></a>00203         <span class="keywordtype">float</span> temp; <span class="comment">//0 is no expansion</span>
<a name="l00204"></a>00204 
<a name="l00205"></a>00205         <span class="keywordtype">void</span> floorForce(<span class="keywordtype">float</span> dt, <a class="code" href="class_vec3_d.html">Vec3D&lt;double&gt;</a>* pTotalForce); <span class="comment">//modifies pTotalForce to include the object&#39;s interaction with a floor. This should be calculated as the last step of sumForce so that pTotalForce is complete.</span>
<a name="l00206"></a>00206 
<a name="l00207"></a>00207 
<a name="l00208"></a>00208 
<a name="l00209"></a>00209         <a class="code" href="class_vec3_d.html">Vec3D&lt;float&gt;</a> strain(<span class="keywordtype">bool</span> poissonsStrain) <span class="keyword">const</span>; <span class="comment">//LCS returns voxel strain. if tensionStrain true and no actual tension in that</span>
<a name="l00210"></a>00210         <a class="code" href="class_vec3_d.html">Vec3D&lt;float&gt;</a> poissonsStrain();
<a name="l00211"></a>00211         
<a name="l00212"></a>00212         <a class="code" href="class_vec3_d.html">Vec3D&lt;float&gt;</a> pStrain; <span class="comment">//cached poissons strain</span>
<a name="l00213"></a>00213         <span class="keywordtype">bool</span> poissonsStrainInvalid; <span class="comment">//flag for recomputing poissons strain.</span>
<a name="l00214"></a>00214 
<a name="l00215"></a>00215 
<a name="l00216"></a>00216         <span class="keywordtype">void</span> eulerStep(<span class="keywordtype">float</span> dt); <span class="comment">//execute an euler time step at the specified dt</span>
<a name="l00217"></a>00217         <span class="keywordtype">float</span> previousDt; <span class="comment">//remember the duration of the last timestep of this voxel</span>
<a name="l00218"></a>00218 
<a name="l00219"></a>00219         <span class="comment">//collision - recalculate when</span>
<a name="l00220"></a>00220         <span class="keywordtype">void</span> updateSurface();
<a name="l00221"></a>00221         <span class="keywordtype">void</span> enableCollisions(<span class="keywordtype">bool</span> enabled, <span class="keywordtype">float</span> watchRadius = 0.0f); <span class="comment">//watchRadius in voxel units</span>
<a name="l00222"></a>00222         <span class="keywordtype">bool</span> isCollisionsEnabled()<span class="keyword"> const </span>{<span class="keywordflow">return</span> boolStates &amp; COLLISIONS_ENABLED ? <span class="keyword">true</span> : <span class="keyword">false</span>;}
<a name="l00223"></a>00223         <span class="keywordtype">void</span> generateNearby(<span class="keywordtype">int</span> linkDepth, <span class="keywordtype">bool</span> surfaceOnly = <span class="keyword">true</span>);
<a name="l00224"></a>00224 
<a name="l00225"></a>00225         <a class="code" href="class_vec3_d.html">Vec3D&lt;float&gt;</a>* lastColWatchPosition;
<a name="l00226"></a>00226         std::vector&lt;CVX_Collision*&gt;* colWatch;
<a name="l00227"></a>00227         std::vector&lt;CVX_Voxel*&gt;* nearby;
<a name="l00228"></a>00228 
<a name="l00229"></a>00229 
<a name="l00230"></a>00230         <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_c_voxelyze.html" title="Defines and simulates a configuration of voxels.">CVoxelyze</a>; <span class="comment">//give access to private members directly</span>
<a name="l00231"></a>00231         <span class="comment">//friend class CVX_Link;</span>
<a name="l00232"></a>00232         <span class="comment">//friend class CVX_Collision;</span>
<a name="l00233"></a>00233 
<a name="l00234"></a>00234         <span class="keyword">friend</span> <span class="keyword">class </span>CVXS_SimGLView; <span class="comment">//TEMPORARY</span>
<a name="l00235"></a>00235         <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_c_v_x___linear_solver.html" title="A linear solver for Voxelyze.">CVX_LinearSolver</a>;
<a name="l00236"></a>00236 
<a name="l00237"></a>00237 };
<a name="l00238"></a>00238 
<a name="l00239"></a>00239 
<a name="l00240"></a>00240 <span class="comment">//References:</span>
<a name="l00241"></a>00241 <span class="comment">//http://gafferongames.com/game-physics/physics-in-3d/</span>
<a name="l00242"></a>00242 
<a name="l00243"></a>00243 <span class="comment">//Poissons ratio (volumetric expansion)</span>
<a name="l00244"></a>00244 <span class="comment">//http://www.colorado.edu/engineering/CAS/courses.d/Structures.d/IAST.Lect05.d/IAST.Lect05.pdf</span>
<a name="l00245"></a>00245 
<a name="l00246"></a>00246 
<a name="l00247"></a>00247 <span class="preprocessor">#endif //VX_VOXEL_H</span>
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Mon Jan 12 2015 11:22:01 for Voxelyze by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
